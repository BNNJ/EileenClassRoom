{% extends "base.html" %}

{% block title %}{{ event.title }} - Eileen's Classroom{% endblock %}

{% block content %}
<div class="event-detail">
    <div class="event-header">
        <h1>{{ event.title }}</h1>
        <span class="event-type-badge event-{{ event.event_type }}">{{ event.event_type.replace('_', ' ').title() }}</span>
    </div>

    <div class="event-meta">
        <p><strong>ğŸ“… Date:</strong> {{ event.date.strftime('%A, %B %d, %Y') }}</p>
        <p><strong>ğŸ‘¤ Created by:</strong> {{ event.creator.name }}</p>
        {% if event.snack_parent %}
            <p><strong>ğŸ Snack Duty:</strong> {{ event.snack_parent.name }} ({{ event.snack_parent.child_name }}'s parent)</p>
        {% endif %}
    </div>

    {% if event.description %}
        <div class="event-description">
            <h3>Details</h3>
            <p>{{ event.description }}</p>
        </div>
    {% endif %}

    <div class="event-actions">
        <a href="{{ url_for('calendar.view') }}" class="btn btn-secondary">â† Back to Calendar</a>
        {% if current_user.id == event.created_by or current_user.is_admin %}
            <form action="{{ url_for('calendar.delete_event', event_id=event.id) }}" method="post" style="display: inline;">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this event?')">Delete Event</button>
            </form>
        {% endif %}
    </div>
</div>
{% endblock %}
