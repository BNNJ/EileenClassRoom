{% extends "base.html" %}

{% block title %}{{ message.subject }} - Eileen's Classroom{% endblock %}

{% block content %}
<div class="message-view">
    <div class="message-header">
        <h1>{{ message.subject }}</h1>
        <div class="message-info">
            <span>From: <strong>{{ message.sender.name }}</strong></span>
            <span>{{ message.created_at.strftime('%A, %B %d, %Y at %I:%M %p') }}</span>
        </div>
    </div>

    <div class="message-body">
        <p>{{ message.body }}</p>
    </div>

    <div class="message-actions">
        <a href="{{ url_for('messages.list_messages') }}" class="btn btn-secondary">â† Back to Messages</a>
        {% if current_user.id == message.sender_id or current_user.is_admin %}
            <form action="{{ url_for('messages.delete_message', message_id=message.id) }}" method="post" style="display: inline;">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this message?')">Delete Message</button>
            </form>
        {% endif %}
    </div>
</div>
{% endblock %}
